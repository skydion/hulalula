<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $('.expand_button').click(function (e) {
            e.preventDefault(e);

            var cell = $(this).parent('.cell');
            cell.toggleClass('expanded');

            var isExpanded = cell.hasClass('expanded');

            if (isExpanded == true) {
                $('.cell').hide();
                cell.show();
            }
            else if (isExpanded == false)
                $('.cell').show();
        });
    });
</script>

<% content_for :thead do %>
    <thead>
    <tr> <th>UUID</th> <th>State</th> <th>Owner</th> <th>Username</th> <th>E-mail</th> <th>Subject</th> <th>Problem</th> <th colspan='3'>Actions</th> </tr>
    </thead>
<% end %>

<div class="cell">
  Left top cell [unassigned]
  <%= link_to image_tag('expand-icon.png'), '#', class: 'expand_button'  %>

  <table>
    <%= yield :thead %>

    <tbody> <%= render partial: 'tickets/table_row', collection: unassigned, as: :ticket %> </tbody>
  </table>
</div>

<div class="cell">
  Right top cell [opened]
  <%= link_to image_tag('expand-icon.png'), '#', class: 'expand_button' %>

  <table>
    <%= yield :thead %>

    <tbody> <%= render partial: 'tickets/table_row', collection: Ticket.where('support_id IS NULL'), as: :ticket %> </tbody>
  </table>
</div>

<div class="cell">
  Left bottom cell [on hold]
  <%= link_to image_tag('expand-icon.png'), '#', class: 'expand_button' %>

  <table>
    <thead>
    <%= yield :thead %>

    <tbody> <%= render partial: 'tickets/table_row', collection: onhold, as: :ticket %> </tbody>
  </table>
</div>

<div class="cell">
  Right bottom cell [closed]
  <%= link_to image_tag('expand-icon.png'), '#', class: 'expand_button' %>

  <table>
    <%= yield :thead %>

    <tbody> <%= render partial: 'tickets/table_row', collection: closed, as: :ticket %> </tbody>
  </table>
</div>
